{"version":3,"file":"static/js/866.2152aef2.chunk.js","mappings":"uRAQO,SAASA,IACd,OAAOC,OAAOC,kBAAoB,CACpC,CAEO,SAASC,EAAgBC,EAAKC,EAASC,EAASC,GACrDH,EAAII,UAAUH,EAASC,GACvBF,EAAIG,OAAOE,KAAKC,GAAK,IAAMC,OAAOJ,IAClCH,EAAII,WAAWH,GAAUC,EAC3B,CCgLA,MAtLkB,SAAAM,GAChB,IAAIC,EAAIC,EACR,EAiBIF,EAZFG,OAAAA,OAAM,IAAG,IAAC,IAYRH,EAXFL,OAAAA,OAAM,IAAG,GAAC,GAAE,EACZS,EAUEJ,EAVFI,MACAC,EASEL,EATFK,OACAC,EAQEN,EARFM,MACAC,EAOEP,EAPFO,QAAO,EAOLP,EANFQ,KAAAA,OAAI,IAAG,GAAC,EAAC,EACTC,EAKET,EALFS,MACAC,EAIEV,EAJFU,UAAS,EAIPV,EAHFW,IAAAA,OAAG,IAAG,GAAC,IAAK,KAAI,EAChBC,EAEEZ,EAFFY,OACAC,EACEb,EADFa,SAEF,EAMIL,EALFM,MAAAA,OAAK,IAAG,oBAAiB,IAKvBN,EAJFO,SAAAA,OAAQ,IAAG,KAAE,IAIXP,EAHFQ,WAAAA,OAAU,IAAG,WAAQ,IAGnBR,EAFFS,UAAAA,OAAS,IAAG,WAAQ,IAElBT,EADFU,WAAAA,OAAU,IAAG,eAAY,EAE3B,UAAqBP,EAAG,GAAjBQ,EAAI,KAAEC,EAAI,KACXC,EAAaF,EAAO,EACpBG,EAAaF,EAAO,EACpBG,EAAkF,QAApEtB,EAAgB,OAAXW,QAA8B,IAAXA,OAAoB,EAASA,EAAO,UAAuB,IAAPX,EAAgBA,EAAKoB,EAC/GG,EAAiF,QAApEtB,EAAgB,OAAXU,QAA8B,IAAXA,OAAoB,EAASA,EAAO,UAAuB,IAAPV,EAAgBA,EAAKoB,EA4B9GG,GAAeC,EAAAA,EAAAA,QAAO,MACtBC,GAAeD,EAAAA,EAAAA,UACrB,ECtEa,WACb,IAAME,GAAWF,EAAAA,EAAAA,UACXG,EAAkB,WAClBD,EAASE,UACXF,EAASE,QAAQC,cACjBH,EAASE,QAAQE,aACjBJ,EAASE,aAAUG,EAEvB,EAyBA,OAbAC,EAAAA,EAAAA,YAAU,kBAAML,CAAe,GAAE,IAa1B,CACLM,eAzBqB,SAACC,EAAQC,GAC1BC,mBACFT,IACAD,EAASE,QAAU,IAAIQ,iBAAiBD,GACxCT,EAASE,QAAQS,QAAQH,EAAQ,CAC/BI,WAAW,EACXC,SAAS,EACTC,gBAAiB,CAAC,QAAS,WAGjC,EAgBEb,gBAAAA,EACAc,YAfkB,SAACC,EAAUC,GAC7B,IAAIC,GAAO,EASX,OAPIF,EAASG,aAAaC,SACxBF,EAAOG,MAAMC,KAAKN,EAASG,cAAcI,MAAK,SAAAC,GAAI,OAAIA,IAASP,CAAgB,KAG3D,eAAlBD,EAASS,MAAyBT,EAASR,SAAWS,IACxDC,GAAO,GAEFA,CACT,EAMF,CDoCMQ,GAHFnB,EAAc,EAAdA,eACAN,EAAe,EAAfA,gBACAc,EAAW,EAAXA,YAQIY,EAAkB,SAACC,EAAWC,GAClC,IAAIxD,EACAwB,EAAaK,SAAWH,EAAaG,UACvCD,IACAF,EAAaG,QAAQ4B,aAAa,QDlFjC,SAAqBjD,GAC1B,OAAOkD,OAAOC,KAAKnD,GAAOoD,KAAI,SAAAC,GAAG,gBAJ5B,SAA8BA,GACnC,OAAOA,EAAIC,QAAQ,WAAY,OAAOC,aACxC,CAE0CC,CAAqBH,GAAI,aAAKrD,EAAMqD,GAAI,QAAKI,KAAK,IAC5F,CCgFiDC,CAAYR,OAAOS,OAAOT,OAAOS,OAAO,CAAC,EA5CnE,WACnB,IAAMC,EAAY,CAChBlE,OAAAA,EACAmE,SAAU,WACVC,KAAM,EACNC,IAAK,EACLpE,MAAO,OACPC,OAAQ,OACRoE,cAAe,OACfC,iBAAkB,UAGhBC,EAAepD,EAAaF,EAC5BuD,EAAcpD,EAAYF,EAY9B,OAXIqD,EAAe,IACjBN,EAAUE,KAAO,GAAH,OAAMI,EAAY,MAChCN,EAAUjE,MAAQ,eAAH,OAAkBuE,EAAY,OAC7CA,EAAe,GAEbC,EAAc,IAChBP,EAAUG,IAAM,GAAH,OAAMI,EAAW,MAC9BP,EAAUhE,OAAS,eAAH,OAAkBuE,EAAW,OAC7CA,EAAc,GAEhBP,EAAUQ,mBAAqB,GAAH,OAAMF,EAAY,cAAMC,EAAW,MACxDP,CACT,CAkB2FS,IAAiB,CACtGC,gBAAiB,QAAF,OAAUvB,EAAS,MAClCwB,eAAgB,GAAF,OAhFL,GAgFW7D,EAAOsC,GAAqB,UAElB,QAA/BxD,EAAKwB,EAAaK,eAA4B,IAAP7B,GAAyBA,EAAGgF,OAAOtD,EAAaG,SACxFK,EAAeV,EAAaK,SAAS,SAAAoD,GACnCA,EAAUC,SAAQ,SAAAvC,GACZD,EAAYC,EAAUjB,EAAaG,WAhBzCH,EAAaG,UACfH,EAAaG,QAAQsD,SACrBzD,EAAaG,aAAUG,GAiBjBoD,IAEJ,GACF,IAEJ,EAiBMC,EAAY,SAAC9F,EAAK+F,EAAOC,EAAOC,EAAWC,GAC/C,IAAMC,EAAQvG,IACRwG,EAAiB7F,OAAOgB,GAAY4E,EAC1CnG,EAAIgB,KAAO,GAAH,OAAMS,EAAS,mBAAWD,EAAU,YAAI4E,EAAc,cAAMF,EAAU,cAAMxE,GACpF1B,EAAIqG,UAAY/E,EAChBtB,EAAIsG,UAAY,SAChBtG,EAAIuG,aAAe,MACnBvG,EAAII,UAAU6F,EAAY,EAAG,GAC7B,IAAMO,EAAW/C,MAAMgD,QAAQ1F,GAAWA,EAAU,CAACA,GACxC,OAAbyF,QAAkC,IAAbA,GAA+BA,EAASb,SAAQ,SAACe,EAAMC,GAC1E3G,EAAI4G,SAAkB,OAATF,QAA0B,IAATA,EAAkBA,EAAO,GAAIX,EAAOC,EAAQW,GAASP,EAvHzE,EAuHoGD,GAChH,GACF,EACMN,EAAkB,WACtB,IAAMgB,EAASC,SAASC,cAAc,UAChC/G,EAAM6G,EAAOG,WAAW,MAC9B,GAAIhH,EAAK,CACFmC,EAAaG,UAChBH,EAAaG,QAAUwE,SAASC,cAAc,QAEhD,IAAMZ,EAAQvG,IACd,EAjCgB,SAAAI,GAClB,IAAIiH,EAAe,IACfC,EAAgB,GACpB,IAAKpG,GAASd,EAAImH,YAAa,CAC7BnH,EAAIgB,KAAO,GAAH,OAAMT,OAAOgB,GAAS,cAAMG,GACpC,IAAM8E,EAAW/C,MAAMgD,QAAQ1F,GAAWA,EAAU,CAACA,GAC/CqG,EAASZ,EAASnC,KAAI,SAAAqC,GAAI,OAAI1G,EAAImH,YAAYT,GAAM9F,KAAK,IAC/DqG,EAAe5G,KAAKgH,KAAKhH,KAAKiH,IAAIC,MAAMlH,MAAMmH,EAAAA,EAAAA,GAAmBJ,KACjEF,EAAgB3G,OAAOgB,GAAYiF,EAAShD,OAzGlC,GAyG4CgD,EAAShD,OAAS,EAC1E,CACA,MAAO,CAAW,OAAV5C,QAA4B,IAAVA,EAAmBA,EAAQqG,EAAyB,OAAXpG,QAA8B,IAAXA,EAAoBA,EAASqG,EACrH,CAsBoCO,CAAYzH,GAAI,eAAzCiE,EAAS,KAAEyD,EAAU,KACtBC,GAAehG,EAAOsC,GAAakC,EACnCyB,GAAgBhG,EAAO8F,GAAcvB,EAC3CU,EAAO3C,aAAa,QAAS,GAAF,OAtIhB,EAsIqByD,EAAsB,OACtDd,EAAO3C,aAAa,SAAU,GAAF,OAvIjB,EAuIsB0D,EAAuB,OACxD,IAAM7B,EAAQpE,EAAOwE,EAAQ,EACvBH,EAAQpE,EAAOuE,EAAQ,EACvBF,EAAYhC,EAAYkC,EACxBD,EAAawB,EAAavB,EAC1BlG,GAAWgG,EAAYtE,EAAOwE,GAAS,EACvCjG,GAAWgG,EAAatE,EAAOuE,GAAS,EAExC0B,EAAiB9B,EAAQ4B,EACzBG,EAAiB9B,EAAQ4B,EACzBG,EAAmB9H,EAAU0H,EAC7BK,EAAmB9H,EAAU0H,EAGnC,GAFA5H,EAAIiI,OACJlI,EAAgBC,EAAKC,EAASC,EAASC,GACnCW,EAAO,CACT,IAAMoH,EAAM,IAAIC,MAChBD,EAAIE,OAAS,WACXpI,EAAIqI,UAAUH,EAAKnC,EAAOC,EAAOC,EAAWC,GAE5ClG,EAAIsI,UACJvI,EAAgBC,EAAK+H,EAAkBC,EAAkB7H,GACzDH,EAAIqI,UAAUH,EAAKL,EAAgBC,EAAgB7B,EAAWC,GAC9DnC,EAAgB8C,EAAO0B,YAAatE,EACtC,EACAiE,EAAIM,YAAc,YAClBN,EAAIO,eAAiB,cACrBP,EAAIQ,IAAM5H,CACZ,MACEgF,EAAU9F,EAAK+F,EAAOC,EAAOC,EAAWC,GAExClG,EAAIsI,UACJvI,EAAgBC,EAAK+H,EAAkBC,EAAkB7H,GACzD2F,EAAU9F,EAAK6H,EAAgBC,EAAgB7B,EAAWC,GAC1DnC,EAAgB8C,EAAO0B,YAAatE,EAExC,CACF,EAEA,OADAvB,EAAAA,EAAAA,WAAUmD,EAAiB,CAAC1F,EAAQQ,EAAQC,EAAOC,EAAQC,EAAOC,EAASO,EAAOC,EAAUC,EAAYC,EAAWC,EAAYC,EAAMC,EAAMG,EAAYC,IACnI2G,EAAAA,cAAoB,MAAO,CAC7CC,IAAK3G,EACLf,UAAWA,EACXD,MAAOkD,OAAOS,OAAO,CACnBE,SAAU,YACT7D,IACFI,EACL,E,WElLMwH,EAAMC,EAAQ,MAyCpB,EAvCqB,SAACtI,GAAW,IAAD,cACtBuI,GAAMC,EAAAA,EAAAA,MAAND,EACHE,GAAWC,EAAAA,EAAAA,MACVC,GAAQC,EAAAA,EAAAA,IAAYH,EAASI,SAAUC,EAAAA,EAAAA,GAAAA,UAEzCC,EAAWJ,EACXA,EAAM9H,UAA6B,QAArB,EAAI8H,EAAM9H,SAAS,UAAE,OAAjB,EAAmBsF,QACvC4C,EAAWJ,EAAM9H,SAAS,IAE7B,IAAMmI,EAAqB,QAAhB,EAAGD,EAASE,YAAI,aAAb,EAAeD,MACvBE,EAASX,EAAe,QAAd,EAACQ,EAASE,YAAI,aAAb,EAAeD,OAIhC,IAFCG,EAAAA,EAAAA,GAASH,IAAUE,EAASF,EAAQE,GAEjCP,EAAMS,SAAU,OAAO,SAAC,KAAQ,CAACC,GAAIV,EAAMS,SAAUrF,SAAO,IAIhE,IAAMuF,GAAoB,SAAC,EAAS,CAAC/I,QAAmB,QAAV,EAAAoI,EAAMM,YAAI,OAAV,EAAYM,UAAgD,aAAnCC,EAAAA,EAAAA,IAAkB,QAAX,EAACb,EAAMM,YAAI,aAAV,EAAYM,WAA2B,CAAClB,EAAIoB,KAAMpB,EAAIqB,QAAoB,QAAb,EAAGf,EAAMM,YAAI,aAAV,EAAYM,UAAa,GAAG,SAAGvJ,EAAMa,WAGpL,OAAe,QAAX,EAAC8H,EAAMM,YAAI,OAAV,EAAYU,aAGIC,EAAAA,EAAAA,KAAYC,EAAAA,EAAAA,IAAc,gBAYxCP,GAXkB,SAAC,KAAQ,CAACD,GAAG,SAAStF,SAAO,IAJhBuF,CAgBvC,EC9BA,EAfkB,WAChB,OACE,+BACE,UAAC,EAAY,YACX,SAAC,KAAiB,CAChBQ,OAAQ,SAACrB,GACP,OAAOA,EAASI,QAClB,KAEF,SAAC,KAAM,QAIf,C,kICXaD,EAAc,SAAdA,IAA2C,IAEhC,EAFImB,EAAI,uDAAG,GAAIC,EAAM,uDAAG,GAC3CC,EAAS,CAAC,EAAE,UACCD,GAAM,IAAvB,2BAAyB,CAAC,IAAjB9D,EAAI,QACZ,GAAIA,EAAK6D,OAASA,EAAM,OAAO7D,EAC/B,GAAIA,EAAKrF,SAAU,CAClB,IAAMqJ,EAAMtB,EAAYmB,EAAM7D,EAAKrF,UAC/B8C,OAAOC,KAAKsG,GAAKlH,SAAQiH,EAASC,EACvC,CACD,CAAC,+BACD,OAAOD,CACR,EAOaE,EAAuB,SAAvBA,IAAyC,IAE9B,EAFaH,EAAM,uDAAG,GACzCC,EAAS,GAAG,UACCD,GAAM,IAAvB,2BAAyB,CAAC,IAAjB9D,EAAI,QACPA,EAAKkE,aACFlE,EAAKrF,SACPoJ,EAAOI,MAAK,kBACPnE,GAAI,IACPrF,SAAUsJ,EAAqBjE,EAAKrF,aAGtCoJ,EAAOI,KAAKnE,GAGnB,CAAC,+BACD,OAAO+D,CACR,EAOaK,EAA4B,SAA5BA,IAA8C,IAEnC,EAFkBN,EAAM,uDAAG,GAC9CC,EAAS,GAAG,UACCD,GAAM,IAAvB,2BAAyB,CAAC,IACJ,IAOZ,IARD9D,EAAI,QACV,GAAIA,EAAKrF,SACPoJ,EAAOI,KAAK,CACVvG,IAAKoC,EAAK6D,KACVQ,KAAe,QAAX,EAAErE,EAAK+C,YAAI,aAAT,EAAWsB,KACjBC,MAAgB,QAAX,EAAEtE,EAAK+C,YAAI,aAAT,EAAWD,MAClBnI,SAAUyJ,EAA0BpE,EAAKrF,iBAG3CoJ,EAAOI,KAAK,CACVvG,IAAKoC,EAAK6D,KACVQ,KAAe,QAAX,EAAErE,EAAK+C,YAAI,aAAT,EAAWsB,KACjBC,MAAgB,QAAX,EAAEtE,EAAK+C,YAAI,aAAT,EAAWD,OAGzB,CAAC,+BACD,OAAOiB,CACR,C","sources":["../node_modules/antd/es/watermark/utils.js","../node_modules/antd/es/watermark/index.js","../node_modules/antd/es/watermark/useMutationObserver.js","router/RouterExtend.jsx","layout/AllLayout.jsx","utils/router.js"],"sourcesContent":["/** converting camel-cased strings to be lowercase and link it with Separato */\nexport function toLowercaseSeparator(key) {\n  return key.replace(/([A-Z])/g, '-$1').toLowerCase();\n}\nexport function getStyleStr(style) {\n  return Object.keys(style).map(key => `${toLowercaseSeparator(key)}: ${style[key]};`).join(' ');\n}\n/** Returns the ratio of the device's physical pixel resolution to the css pixel resolution */\nexport function getPixelRatio() {\n  return window.devicePixelRatio || 1;\n}\n/** Rotate with the watermark as the center point */\nexport function rotateWatermark(ctx, rotateX, rotateY, rotate) {\n  ctx.translate(rotateX, rotateY);\n  ctx.rotate(Math.PI / 180 * Number(rotate));\n  ctx.translate(-rotateX, -rotateY);\n}","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport React, { useEffect, useRef } from 'react';\nimport useMutationObserver from './useMutationObserver';\nimport { getStyleStr, getPixelRatio, rotateWatermark } from './utils';\n/**\n * Base size of the canvas, 1 for parallel layout and 2 for alternate layout\n * Only alternate layout is currently supported\n */\nconst BaseSize = 2;\nconst FontGap = 3;\nconst Watermark = props => {\n  var _a, _b;\n  const {\n    /**\n     * The antd content layer zIndex is basically below 10\n     * https://github.com/ant-design/ant-design/blob/6192403b2ce517c017f9e58a32d58774921c10cd/components/style/themes/default.less#L335\n     */\n    zIndex = 9,\n    rotate = -22,\n    width,\n    height,\n    image,\n    content,\n    font = {},\n    style,\n    className,\n    gap = [100, 100],\n    offset,\n    children\n  } = props;\n  const {\n    color = 'rgba(0,0,0,.15)',\n    fontSize = 16,\n    fontWeight = 'normal',\n    fontStyle = 'normal',\n    fontFamily = 'sans-serif'\n  } = font;\n  const [gapX, gapY] = gap;\n  const gapXCenter = gapX / 2;\n  const gapYCenter = gapY / 2;\n  const offsetLeft = (_a = offset === null || offset === void 0 ? void 0 : offset[0]) !== null && _a !== void 0 ? _a : gapXCenter;\n  const offsetTop = (_b = offset === null || offset === void 0 ? void 0 : offset[1]) !== null && _b !== void 0 ? _b : gapYCenter;\n  const getMarkStyle = () => {\n    const markStyle = {\n      zIndex,\n      position: 'absolute',\n      left: 0,\n      top: 0,\n      width: '100%',\n      height: '100%',\n      pointerEvents: 'none',\n      backgroundRepeat: 'repeat'\n    };\n    /** Calculate the style of the offset */\n    let positionLeft = offsetLeft - gapXCenter;\n    let positionTop = offsetTop - gapYCenter;\n    if (positionLeft > 0) {\n      markStyle.left = `${positionLeft}px`;\n      markStyle.width = `calc(100% - ${positionLeft}px)`;\n      positionLeft = 0;\n    }\n    if (positionTop > 0) {\n      markStyle.top = `${positionTop}px`;\n      markStyle.height = `calc(100% - ${positionTop}px)`;\n      positionTop = 0;\n    }\n    markStyle.backgroundPosition = `${positionLeft}px ${positionTop}px`;\n    return markStyle;\n  };\n  const containerRef = useRef(null);\n  const watermarkRef = useRef();\n  const {\n    createObserver,\n    destroyObserver,\n    reRendering\n  } = useMutationObserver();\n  const destroyWatermark = () => {\n    if (watermarkRef.current) {\n      watermarkRef.current.remove();\n      watermarkRef.current = undefined;\n    }\n  };\n  const appendWatermark = (base64Url, markWidth) => {\n    var _a;\n    if (containerRef.current && watermarkRef.current) {\n      destroyObserver();\n      watermarkRef.current.setAttribute('style', getStyleStr(Object.assign(Object.assign({}, getMarkStyle()), {\n        backgroundImage: `url('${base64Url}')`,\n        backgroundSize: `${(gapX + markWidth) * BaseSize}px`\n      })));\n      (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.append(watermarkRef.current);\n      createObserver(containerRef.current, mutations => {\n        mutations.forEach(mutation => {\n          if (reRendering(mutation, watermarkRef.current)) {\n            destroyWatermark();\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            renderWatermark();\n          }\n        });\n      });\n    }\n  };\n  /**\n   * Get the width and height of the watermark. The default values are as follows\n   * Image: [120, 64]; Content: It's calculated by content;\n   */\n  const getMarkSize = ctx => {\n    let defaultWidth = 120;\n    let defaultHeight = 64;\n    if (!image && ctx.measureText) {\n      ctx.font = `${Number(fontSize)}px ${fontFamily}`;\n      const contents = Array.isArray(content) ? content : [content];\n      const widths = contents.map(item => ctx.measureText(item).width);\n      defaultWidth = Math.ceil(Math.max.apply(Math, _toConsumableArray(widths)));\n      defaultHeight = Number(fontSize) * contents.length + (contents.length - 1) * FontGap;\n    }\n    return [width !== null && width !== void 0 ? width : defaultWidth, height !== null && height !== void 0 ? height : defaultHeight];\n  };\n  const fillTexts = (ctx, drawX, drawY, drawWidth, drawHeight) => {\n    const ratio = getPixelRatio();\n    const mergedFontSize = Number(fontSize) * ratio;\n    ctx.font = `${fontStyle} normal ${fontWeight} ${mergedFontSize}px/${drawHeight}px ${fontFamily}`;\n    ctx.fillStyle = color;\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'top';\n    ctx.translate(drawWidth / 2, 0);\n    const contents = Array.isArray(content) ? content : [content];\n    contents === null || contents === void 0 ? void 0 : contents.forEach((item, index) => {\n      ctx.fillText(item !== null && item !== void 0 ? item : '', drawX, drawY + index * (mergedFontSize + FontGap * ratio));\n    });\n  };\n  const renderWatermark = () => {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    if (ctx) {\n      if (!watermarkRef.current) {\n        watermarkRef.current = document.createElement('div');\n      }\n      const ratio = getPixelRatio();\n      const [markWidth, markHeight] = getMarkSize(ctx);\n      const canvasWidth = (gapX + markWidth) * ratio;\n      const canvasHeight = (gapY + markHeight) * ratio;\n      canvas.setAttribute('width', `${canvasWidth * BaseSize}px`);\n      canvas.setAttribute('height', `${canvasHeight * BaseSize}px`);\n      const drawX = gapX * ratio / 2;\n      const drawY = gapY * ratio / 2;\n      const drawWidth = markWidth * ratio;\n      const drawHeight = markHeight * ratio;\n      const rotateX = (drawWidth + gapX * ratio) / 2;\n      const rotateY = (drawHeight + gapY * ratio) / 2;\n      /** Alternate drawing parameters */\n      const alternateDrawX = drawX + canvasWidth;\n      const alternateDrawY = drawY + canvasHeight;\n      const alternateRotateX = rotateX + canvasWidth;\n      const alternateRotateY = rotateY + canvasHeight;\n      ctx.save();\n      rotateWatermark(ctx, rotateX, rotateY, rotate);\n      if (image) {\n        const img = new Image();\n        img.onload = () => {\n          ctx.drawImage(img, drawX, drawY, drawWidth, drawHeight);\n          /** Draw interleaved pictures after rotation */\n          ctx.restore();\n          rotateWatermark(ctx, alternateRotateX, alternateRotateY, rotate);\n          ctx.drawImage(img, alternateDrawX, alternateDrawY, drawWidth, drawHeight);\n          appendWatermark(canvas.toDataURL(), markWidth);\n        };\n        img.crossOrigin = 'anonymous';\n        img.referrerPolicy = 'no-referrer';\n        img.src = image;\n      } else {\n        fillTexts(ctx, drawX, drawY, drawWidth, drawHeight);\n        /** Fill the interleaved text after rotation */\n        ctx.restore();\n        rotateWatermark(ctx, alternateRotateX, alternateRotateY, rotate);\n        fillTexts(ctx, alternateDrawX, alternateDrawY, drawWidth, drawHeight);\n        appendWatermark(canvas.toDataURL(), markWidth);\n      }\n    }\n  };\n  useEffect(renderWatermark, [rotate, zIndex, width, height, image, content, color, fontSize, fontWeight, fontStyle, fontFamily, gapX, gapY, offsetLeft, offsetTop]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerRef,\n    className: className,\n    style: Object.assign({\n      position: 'relative'\n    }, style)\n  }, children);\n};\nif (process.env.NODE_ENV !== 'production') {\n  Watermark.displayName = 'Watermark';\n}\nexport default Watermark;","import { useEffect, useRef } from 'react';\nexport default function useMutationObserver() {\n  const instance = useRef();\n  const destroyObserver = () => {\n    if (instance.current) {\n      instance.current.takeRecords();\n      instance.current.disconnect();\n      instance.current = undefined;\n    }\n  };\n  const createObserver = (target, callback) => {\n    if (MutationObserver) {\n      destroyObserver();\n      instance.current = new MutationObserver(callback);\n      instance.current.observe(target, {\n        childList: true,\n        subtree: true,\n        attributeFilter: ['style', 'class']\n      });\n    }\n  };\n  useEffect(() => destroyObserver, []);\n  const reRendering = (mutation, watermarkElement) => {\n    let flag = false;\n    // Whether to delete the watermark node\n    if (mutation.removedNodes.length) {\n      flag = Array.from(mutation.removedNodes).some(node => node === watermarkElement);\n    }\n    // Whether the watermark dom property value has been modified\n    if (mutation.type === 'attributes' && mutation.target === watermarkElement) {\n      flag = true;\n    }\n    return flag;\n  };\n  return {\n    createObserver,\n    destroyObserver,\n    reRendering\n  };\n}","import React from 'react';\nimport { useLocation, Navigate } from \"react-router-dom\";\nimport { addPrefixName } from '../utils';\nimport Cookies from 'js-cookie';\nimport { searchRoute } from '../utils/router';\nimport { routerList } from './index';\nimport { useTitle } from 'ahooks';\nimport { useTranslation } from 'react-i18next';\nimport { Watermark } from 'antd';\nimport { getType } from '../utils';\nconst pkg = require('./../../package.json');\n\nconst RouterExtend = (props) => {\n  const { t } = useTranslation();\n\tconst location = useLocation();\n  const route = searchRoute(location.pathname, routerList[0].children);\n\n  let curRoute = route\n  if (route.children && route.children[0]?.index) {\n    curRoute = route.children[0]\n  }\n\tconst title = curRoute.meta?.title\n\tconst tTitle = t(curRoute.meta?.title)\n\t// 此处利用多语言 t('aaa') 是否等于 'aaa' 来判断是否使用多语言\n  useTitle(title === tTitle ? title : tTitle)\n\n\tif (route.redirect) return <Navigate to={route.redirect} replace />;\n\n  // TODO 在跳转路由之前，清除所有的请求\n\n\tconst watermarkChildren = <Watermark content={route.meta?.watermark ? (getType(route.meta?.watermark) === 'boolean' ? [pkg.name, pkg.author] : route.meta?.watermark) : ''}>{ props.children }</Watermark>;\n\n\t// * 判断当前路由是否需要访问权限(不需要权限直接放行)\n\tif (!route.meta?.requiresAuth) return watermarkChildren;\n\n\t// * 判断是否有Token\n  const accessToken = Cookies.get(addPrefixName('accessToken'));\n\tif (!accessToken) return <Navigate to=\"/login\" replace />;\n\n\t// // * Dynamic Router(动态路由，根据后端返回的菜单数据生成的一维数组)\n\t// const dynamicRouter = store.getState().auth.authRouter;\n\t// // * Static Router(静态路由，必须配置首页地址，否则不能进首页获取菜单、按钮权限等数据)，获取数据的时候会loading，所有配置首页地址也没问题\n\t// const staticRouter = [HOME_URL, \"/403\"];\n\t// const routers = dynamicRouter.concat(staticRouter);\n\t// // * 如果访问的地址没有在路由表中重定向到403页面\n\t// if (routers.indexOf(location.pathname) === -1) return <Navigate to=\"/403\" />;\n\n\t// * 当前账号有权限返回 Router，正常访问页面\n\treturn watermarkChildren;\n};\n\nexport default RouterExtend;\n","import React from 'react';\r\nimport { Outlet, ScrollRestoration } from 'react-router-dom';\r\nimport RouterExtend from '../router/RouterExtend';\r\n\r\nconst AllLayout = () => {\r\n  return (\r\n    <>\r\n      <RouterExtend>\r\n        <ScrollRestoration\r\n          getKey={(location) => {\r\n            return location.pathname;\r\n          }}\r\n        />\r\n        <Outlet />\r\n      </RouterExtend>\r\n    </>\r\n  )\r\n};\r\n\r\nexport default AllLayout;\r\n","/**\r\n * @description 递归查询对应的路由\r\n * @param {String} path 当前访问地址\r\n * @param {Array} routes 路由列表\r\n * @returns array\r\n */\r\nexport const searchRoute = (path = '', routes = []) => {\r\n\tlet result = {};\r\n\tfor (let item of routes) {\r\n\t\tif (item.path === path) return item;\r\n\t\tif (item.children) {\r\n\t\t\tconst res = searchRoute(path, item.children);\r\n\t\t\tif (Object.keys(res).length) result = res;\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n};\r\n\r\n/**\r\n * @description 递归查询menu可展示的路由\r\n * @param {Array} routes 路由列表\r\n * @returns array\r\n */\r\nexport const searchShowMenuRoutes = (routes = []) => {\r\n\tlet result = [];\r\n\tfor (let item of routes) {\r\n\t\tif (!item.hideInMenu) {\r\n      if (item.children) {\r\n        result.push({\r\n          ...item,\r\n          children: searchShowMenuRoutes(item.children)\r\n        })\r\n      } else {\r\n        result.push(item)\r\n      }\r\n    }\r\n\t}\r\n\treturn result;\r\n};\r\n\r\n/**\r\n * @description 递归menu可展示的路由转换为Menu导航菜单\r\n * @param {Array} routes 路由列表\r\n * @returns array\r\n */\r\nexport const showMenuRoutesToMenuItems = (routes = []) => {\r\n\tlet result = [];\r\n\tfor (let item of routes) {\r\n    if (item.children) {\r\n      result.push({\r\n        key: item.path,\r\n        icon: item.meta?.icon,\r\n        label: item.meta?.title,\r\n        children: showMenuRoutesToMenuItems(item.children)\r\n      })\r\n    } else {\r\n      result.push({\r\n        key: item.path,\r\n        icon: item.meta?.icon,\r\n        label: item.meta?.title,\r\n      })\r\n    }\r\n\t}\r\n\treturn result;\r\n};\r\n"],"names":["getPixelRatio","window","devicePixelRatio","rotateWatermark","ctx","rotateX","rotateY","rotate","translate","Math","PI","Number","props","_a","_b","zIndex","width","height","image","content","font","style","className","gap","offset","children","color","fontSize","fontWeight","fontStyle","fontFamily","gapX","gapY","gapXCenter","gapYCenter","offsetLeft","offsetTop","containerRef","useRef","watermarkRef","instance","destroyObserver","current","takeRecords","disconnect","undefined","useEffect","createObserver","target","callback","MutationObserver","observe","childList","subtree","attributeFilter","reRendering","mutation","watermarkElement","flag","removedNodes","length","Array","from","some","node","type","useMutationObserver","appendWatermark","base64Url","markWidth","setAttribute","Object","keys","map","key","replace","toLowerCase","toLowercaseSeparator","join","getStyleStr","assign","markStyle","position","left","top","pointerEvents","backgroundRepeat","positionLeft","positionTop","backgroundPosition","getMarkStyle","backgroundImage","backgroundSize","append","mutations","forEach","remove","renderWatermark","fillTexts","drawX","drawY","drawWidth","drawHeight","ratio","mergedFontSize","fillStyle","textAlign","textBaseline","contents","isArray","item","index","fillText","canvas","document","createElement","getContext","defaultWidth","defaultHeight","measureText","widths","ceil","max","apply","_toConsumableArray","getMarkSize","markHeight","canvasWidth","canvasHeight","alternateDrawX","alternateDrawY","alternateRotateX","alternateRotateY","save","img","Image","onload","drawImage","restore","toDataURL","crossOrigin","referrerPolicy","src","React","ref","pkg","require","t","useTranslation","location","useLocation","route","searchRoute","pathname","routerList","curRoute","title","meta","tTitle","useTitle","redirect","to","watermarkChildren","watermark","getType","name","author","requiresAuth","Cookies","addPrefixName","getKey","path","routes","result","res","searchShowMenuRoutes","hideInMenu","push","showMenuRoutesToMenuItems","icon","label"],"sourceRoot":""}