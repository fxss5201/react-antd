{"version":3,"file":"static/js/146.c8b1e395.chunk.js","mappings":"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","sources":["pages/login/components/PasswordLogin.jsx","../node_modules/@ant-design/icons-svg/es/asn/MobileOutlined.js","../node_modules/@ant-design/icons/es/icons/MobileOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/SafetyCertificateOutlined.js","../node_modules/@ant-design/icons/es/icons/SafetyCertificateOutlined.js","pages/login/components/VerificationLogin.jsx","pages/login/index.jsx","../node_modules/ahooks/es/useCountDown/index.js","../node_modules/ahooks/es/createUseStorageState/index.js","../node_modules/ahooks/es/useLocalStorageState/index.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { LockOutlined, UserOutlined } from '@ant-design/icons';\nimport { Button, Checkbox, Form, Input, message } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useLocalStorageState, useMount, useUnmount } from 'ahooks';\nimport { addPrefixName, encryptFn, decryptFn, getColorPrimary } from '../../../utils/index';\nimport Cookies from 'js-cookie';\nimport { useDispatch } from 'react-redux';\nimport { setUserInfo } from './../../../store/userInfo';\n\nconst PasswordLogin = ({ activeKey }) => {\n  const colorPrimary = getColorPrimary();\n  const [isValidate, setIsValidate] = useState(false);\n  const [localLoginInfo, setLocalLoginInfo] = useLocalStorageState(addPrefixName('loginInfo'));\n\n  const [form] = Form.useForm()\n  useMount(() => {\n    if (localLoginInfo) {\n      form.setFieldsValue({\n        username: localLoginInfo.username,\n        password: decryptFn(localLoginInfo.password),\n        remember: localLoginInfo.remember\n      })\n    }\n  })\n  // useEffect(() => {\n  //   form.resetFields()\n  // }, [form, activeKey])\n\n  const { t, i18n } = useTranslation();\n  i18n.on('languageChanged', (lng) => {\n    if (isValidate) form.validateFields();\n  })\n  useUnmount(() => {\n    i18n.off('languageChanged');\n  })\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const onFinish = (values) => {\n    setLocalLoginInfo({\n      username: values.username,\n      password: encryptFn(values.password),\n      remember: values.remember,\n    })\n\n    let access = [];\n    if (values.username === 'normal') {\n      access = ['normal'];\n    } else if (values.username === 'middle') {\n      access = ['middle'];\n    } else if (values.username === 'admin') {\n      access = ['normal', 'middle', 'admin'];\n    }\n\n    Cookies.set(addPrefixName('accessToken'), values.username, { expires: 7 })\n    dispatch(setUserInfo({\n      name: values.username,\n      header: 'https://avatars.githubusercontent.com/u/21698289?s=48&v=4',\n      access,\n    }));\n    message.success(t('登陆成功'));\n    navigate('/');\n    console.log('Received values of form: ', values);\n  };\n\n  return (\n    <Form\n      initialValues={{\n        remember: true,\n      }}\n      form={form}\n      onFinish={onFinish}\n      size=\"large\"\n      name=\"login\"\n      className=\"w-80\"\n    >\n      <Form.Item\n        name=\"username\"\n        rules={[\n          {\n            required: true,\n            message: t('Please input your Username!'),\n          },\n        ]}\n      >\n        <Input prefix={<UserOutlined className=\"text-gray-400\" />} placeholder={t('Username')} allowClear />\n      </Form.Item>\n      <Form.Item\n        name=\"password\"\n        rules={[\n          {\n            required: true,\n            message: t('Please input your Password!'),\n          },\n        ]}\n      >\n        <Input.Password prefix={<LockOutlined className=\"text-gray-400\" />} placeholder={t('Password')} allowClear />\n      </Form.Item>\n      <Form.Item>\n        <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\n          <Checkbox>{t('Remember me')}</Checkbox>\n        </Form.Item>\n\n        <Link className=\"float-right a\" to=\"/login/password\" style={{color: colorPrimary}}>{t('Forgot password')}</Link>\n      </Form.Item>\n\n      <Form.Item>\n        <Button type=\"primary\" htmlType=\"submit\" className=\"w-full\" onClick={() => setIsValidate(true)}>{t('Log in')}</Button>\n        <div className='mt-3'>{t('Or')} <Link to=\"/login/register\" className=\"a\" style={{color: colorPrimary}}>{t('register now!')}</Link></div>\n      </Form.Item>\n\n      <Form.Item>\n        <ul style={{listStyle: 'decimal', paddingLeft: '14px'}}>\n          <li>账号normal，密码随意，对应的是normal权限</li>\n          <li>账号middle，密码随意，对应的是middle权限</li>\n          <li>账号admin，密码随意，对应的是admin权限（拥有normal和middle权限）</li>\n          <li>账号随意 ，密码随意，对应的仅是requiresAuth: true的页面</li>\n        </ul>\n      </Form.Item>\n    </Form>\n  );\n}\n\nexport default PasswordLogin;\n","// This icon file is generated automatically.\nvar MobileOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z\" } }] }, \"name\": \"mobile\", \"theme\": \"outlined\" };\nexport default MobileOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport MobileOutlinedSvg from \"@ant-design/icons-svg/es/asn/MobileOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar MobileOutlined = function MobileOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: MobileOutlinedSvg\n  }));\n};\nMobileOutlined.displayName = 'MobileOutlined';\nexport default /*#__PURE__*/React.forwardRef(MobileOutlined);","// This icon file is generated automatically.\nvar SafetyCertificateOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M866.9 169.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6zm-405.8-201c-3-4.1-7.8-6.6-13-6.6H336c-6.5 0-10.3 7.4-6.5 12.7l126.4 174a16.1 16.1 0 0026 0l212.6-292.7c3.8-5.3 0-12.7-6.5-12.7h-55.2c-5.1 0-10 2.5-13 6.6L468.9 542.4l-64.7-89.1z\" } }] }, \"name\": \"safety-certificate\", \"theme\": \"outlined\" };\nexport default SafetyCertificateOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport SafetyCertificateOutlinedSvg from \"@ant-design/icons-svg/es/asn/SafetyCertificateOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar SafetyCertificateOutlined = function SafetyCertificateOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: SafetyCertificateOutlinedSvg\n  }));\n};\nSafetyCertificateOutlined.displayName = 'SafetyCertificateOutlined';\nexport default /*#__PURE__*/React.forwardRef(SafetyCertificateOutlined);","import React, { useEffect, useState } from 'react';\nimport { SafetyCertificateOutlined, MobileOutlined } from '@ant-design/icons';\nimport { Button, Form, Input } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { Link } from \"react-router-dom\";\nimport { useCountDown, useUnmount } from 'ahooks';\nimport config from '../../../config';\nimport { getColorPrimary } from '../../../utils';\n\nconst VerificationLogin = ({ activeKey }) => {\n  const colorPrimary = getColorPrimary();\n  const [isValidate, setIsValidate] = useState(false)\n\n  const [form] = Form.useForm()\n  useEffect(() => {\n    // form.resetFields();\n    setTargetDate(undefined);\n    setIsGetVerificationLoading(false);\n  }, [form, activeKey])\n\n  const { t, i18n } = useTranslation();\n  i18n.on('languageChanged', (lng) => {\n    if (isValidate) form.validateFields();\n  })\n  useUnmount(() => {\n    i18n.off('languageChanged');\n  })\n\n  const [isGetVerificationLoading, setIsGetVerificationLoading] = useState(false);\n  const [targetDate, setTargetDate] = useState();\n  const [countdown] = useCountDown({\n    targetDate,\n    onEnd: () => {\n      setIsGetVerificationLoading(false);\n    },\n  });\n\n  const onFinish = (values) => {\n    console.log('Received values of form: ', values);\n  };\n  const getVerification = () => {\n    form.validateFields(['Phone']).then(() => {\n      setTargetDate(Date.now() + 60 * 1000);\n      setIsGetVerificationLoading(true);\n    })\n  };\n\n  return (\n    <Form\n      initialValues={{\n        remember: true,\n      }}\n      form={form}\n      onFinish={onFinish}\n      size=\"large\"\n      name=\"login\"\n      className=\"w-80\"\n    >\n      <Form.Item\n        name=\"Phone\"\n        rules={[\n          {\n            required: true,\n            message: t('Please input your Phone!'),\n          },\n          {\n            pattern: config.phonePattern,\n            message: t('Incorrect mobile number format!'),\n          },\n        ]}\n      >\n        <Input prefix={<MobileOutlined className=\"text-gray-400\" />} placeholder={t('Phone')} allowClear />\n      </Form.Item>\n\n      <Form.Item\n        name=\"Verification\"\n        rules={[\n          {\n            required: true,\n            message: t('Please input your Verification!'),\n          },\n          {\n            pattern: config.verificationPattern,\n            message: t('Incorrect format of verification number!')\n          },\n        ]}\n        className='flex-auto'\n      >\n        <Input prefix={<SafetyCertificateOutlined className=\"text-gray-400\" />} placeholder={t('Verification')} addonAfter={\n          isGetVerificationLoading ? `${Math.round(countdown / 1000)}s` : <div className='cursor-pointer' onClick={getVerification}>{t('Get verification code')}</div>\n        } allowClear />\n      </Form.Item>\n\n      <Form.Item>\n        <Button type=\"primary\" htmlType=\"submit\" className=\"w-full\" onClick={() => setIsValidate(true)}>{t('Log in')}</Button>\n        <div className='mt-3 clearfix'>\n          <Link className=\"float-left a\" to=\"/login/register\" style={{color: colorPrimary}}>{t('register now!')}</Link>\n          <Link className=\"float-right a\" to=\"/login/password\" style={{color: colorPrimary}}>{t('Forgot password')}</Link>\n        </div>\n      </Form.Item>\n    </Form>\n  );\n}\n\nexport default VerificationLogin;\n","import React, { useState } from 'react';\nimport { Tabs } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport PasswordLogin from './components/PasswordLogin';\nimport VerificationLogin from './components/VerificationLogin';\n\nconst LoginIndex = () => {\n  const { t } = useTranslation();\n  const [activeKey , setActiveKey] = useState('1')\n  const onChange = (key) => {\n    setActiveKey(key);\n  };\n\n  return (\n    <Tabs\n      activeKey={activeKey}\n      size=\"large\"\n      onChange={onChange}\n      centered\n      items={[\n        {\n          label: t('Password Login'),\n          key: '1',\n          children: <PasswordLogin activeKey={activeKey} />,\n        },\n        {\n          label: t('Verification login'),\n          key: '2',\n          children: <VerificationLogin activeKey={activeKey} />,\n        }\n      ]}\n    />\n  );\n}\n\nexport default LoginIndex;\n","import dayjs from 'dayjs';\nimport { useEffect, useMemo, useState } from 'react';\nimport useLatest from '../useLatest';\nimport { isNumber } from '../utils/index';\nconst calcLeft = target => {\n  if (!target) {\n    return 0;\n  }\n  // https://stackoverflow.com/questions/4310953/invalid-date-in-safari\n  const left = dayjs(target).valueOf() - Date.now();\n  return left < 0 ? 0 : left;\n};\nconst parseMs = milliseconds => {\n  return {\n    days: Math.floor(milliseconds / 86400000),\n    hours: Math.floor(milliseconds / 3600000) % 24,\n    minutes: Math.floor(milliseconds / 60000) % 60,\n    seconds: Math.floor(milliseconds / 1000) % 60,\n    milliseconds: Math.floor(milliseconds) % 1000\n  };\n};\nconst useCountdown = (options = {}) => {\n  const {\n    leftTime,\n    targetDate,\n    interval = 1000,\n    onEnd\n  } = options || {};\n  const target = useMemo(() => {\n    if ('leftTime' in options) {\n      return isNumber(leftTime) && leftTime > 0 ? Date.now() + leftTime : undefined;\n    } else {\n      return targetDate;\n    }\n  }, [leftTime, targetDate]);\n  const [timeLeft, setTimeLeft] = useState(() => calcLeft(target));\n  const onEndRef = useLatest(onEnd);\n  useEffect(() => {\n    if (!target) {\n      // for stop\n      setTimeLeft(0);\n      return;\n    }\n    // 立即执行一次\n    setTimeLeft(calcLeft(target));\n    const timer = setInterval(() => {\n      var _a;\n      const targetLeft = calcLeft(target);\n      setTimeLeft(targetLeft);\n      if (targetLeft === 0) {\n        clearInterval(timer);\n        (_a = onEndRef.current) === null || _a === void 0 ? void 0 : _a.call(onEndRef);\n      }\n    }, interval);\n    return () => clearInterval(timer);\n  }, [target, interval]);\n  const formattedRes = useMemo(() => parseMs(timeLeft), [timeLeft]);\n  return [timeLeft, formattedRes];\n};\nexport default useCountdown;","/* eslint-disable no-empty */\nimport { useState } from 'react';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useUpdateEffect from '../useUpdateEffect';\nimport { isFunction, isUndef } from '../utils';\nexport function createUseStorageState(getStorage) {\n  function useStorageState(key, options) {\n    let storage;\n    // https://github.com/alibaba/hooks/issues/800\n    try {\n      storage = getStorage();\n    } catch (err) {\n      console.error(err);\n    }\n    const serializer = value => {\n      if (options === null || options === void 0 ? void 0 : options.serializer) {\n        return options === null || options === void 0 ? void 0 : options.serializer(value);\n      }\n      return JSON.stringify(value);\n    };\n    const deserializer = value => {\n      if (options === null || options === void 0 ? void 0 : options.deserializer) {\n        return options === null || options === void 0 ? void 0 : options.deserializer(value);\n      }\n      return JSON.parse(value);\n    };\n    function getStoredValue() {\n      try {\n        const raw = storage === null || storage === void 0 ? void 0 : storage.getItem(key);\n        if (raw) {\n          return deserializer(raw);\n        }\n      } catch (e) {\n        console.error(e);\n      }\n      if (isFunction(options === null || options === void 0 ? void 0 : options.defaultValue)) {\n        return options === null || options === void 0 ? void 0 : options.defaultValue();\n      }\n      return options === null || options === void 0 ? void 0 : options.defaultValue;\n    }\n    const [state, setState] = useState(() => getStoredValue());\n    useUpdateEffect(() => {\n      setState(getStoredValue());\n    }, [key]);\n    const updateState = value => {\n      const currentState = isFunction(value) ? value(state) : value;\n      setState(currentState);\n      if (isUndef(currentState)) {\n        storage === null || storage === void 0 ? void 0 : storage.removeItem(key);\n      } else {\n        try {\n          storage === null || storage === void 0 ? void 0 : storage.setItem(key, serializer(currentState));\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    };\n    return [state, useMemoizedFn(updateState)];\n  }\n  return useStorageState;\n}","import { createUseStorageState } from '../createUseStorageState';\nimport isBrowser from '../utils/isBrowser';\nconst useLocalStorageState = createUseStorageState(() => isBrowser ? localStorage : undefined);\nexport default useLocalStorageState;"],"names":["activeKey","colorPrimary","getColorPrimary","useState","isValidate","setIsValidate","useLocalStorageState","addPrefixName","localLoginInfo","setLocalLoginInfo","Form","form","useMount","setFieldsValue","username","password","decryptFn","remember","useTranslation","t","i18n","on","lng","validateFields","useUnmount","off","dispatch","useDispatch","navigate","useNavigate","initialValues","onFinish","values","encryptFn","access","Cookies","expires","setUserInfo","name","header","message","console","log","size","className","rules","required","prefix","UserOutlined","placeholder","allowClear","LockOutlined","valuePropName","noStyle","to","style","color","type","htmlType","onClick","listStyle","paddingLeft","MobileOutlined","props","ref","React","AntdIcon","_objectSpread","icon","MobileOutlinedSvg","displayName","SafetyCertificateOutlined","SafetyCertificateOutlinedSvg","useEffect","setTargetDate","undefined","setIsGetVerificationLoading","isGetVerificationLoading","targetDate","useCountDown","onEnd","countdown","pattern","config","addonAfter","Math","round","then","Date","now","setActiveKey","onChange","key","centered","items","label","children","calcLeft","target","left","dayjs","valueOf","parseMs","milliseconds","days","floor","hours","minutes","seconds","options","leftTime","interval","useMemo","isNumber","timeLeft","setTimeLeft","onEndRef","useLatest","timer","setInterval","_a","targetLeft","clearInterval","current","call","formattedRes","getStorage","isBrowser","localStorage","storage","err","error","deserializer","value","JSON","parse","getStoredValue","raw","getItem","e","isFunction","defaultValue","state","setState","useUpdateEffect","useMemoizedFn","currentState","isUndef","removeItem","setItem","serializer","stringify"],"sourceRoot":""}